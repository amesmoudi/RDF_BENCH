version: '3.8'

services:
  master:
    image: adpart_master:latest
    deploy:
      replicas: 1
      placement:
        constraints:
          - node.hostname == master
    networks:
      - adpart-network

  worker01:
    image: adpart_worker:latest
    deploy:
      replicas: 1
      placement:
        constraints:
          - node.hostname == worker01
    networks:
      - adpart-network

  worker02:
    image: worker:latest
    deploy:
      replicas: 1
      placement:
        constraints:
          - node.hostname == worker02
    networks:
      - adpart-network

networks:
  adpart-network:
    driver: overlay
